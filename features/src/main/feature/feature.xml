<?xml version="1.0" encoding="UTF-8"?>
<features name="restexample" xmlns="http://karaf.apache.org/xmlns/features/v1.4.0">

    <repository>mvn:org.apache.aries.jax.rs/org.apache.aries.jax.rs.features/${aries.version}/xml</repository>

    <feature name="restexample-common" version="${project.version}">
        <bundle>mvn:cc.kako.examples.rest/api/${project.version}</bundle>
    </feature>

    <feature name="restexample-server" version="${project.version}">
        <feature version="${project.version}">restexample-common</feature>

        <feature>http-whiteboard</feature>
        <feature>aries-jax-rs-whiteboard</feature>
        <feature>aries-jax-rs-whiteboard-jackson</feature>

        <feature>transaction</feature>
        <feature>jndi</feature>
        <feature>pax-jdbc-config</feature>
        <feature>pax-jdbc-h2</feature>
        <feature>pax-jdbc-pool-dbcp2</feature>
        <feature>jdbc</feature>
        <feature dependency="true">aries-blueprint</feature>
        <feature version="[2,3)">jpa</feature>
        <feature version="[2,3)">eclipselink</feature>
    </feature>

    <feature name="karaf-jpa-server-datasource" version="${project.version}">
        <config name="org.ops4j.datasource-booking">
            osgi.jdbc.driver.class=org.h2.Driver
            databaseName=./contact;create=true
            dataSourceName=contact
        </config>
        <capability>
            osgi.service;objectClass=javax.sql.DataSource;effective:=active;osgi.jndi.service.name=contact
        </capability>
    </feature>
</features>
